//创建数据库并设置编码
CREATE DATABASE IF NOT EXISTS zero CHARACTER SET utf8;

//删除数据库
DROP DATABASE IF EXISTS zero;

//查看数据库
SHOW DATABASES;

//查看数据表
SHOW TABLES;

//选择数据库
USE zero;

//设置编码(客户端)
SET NAMES utf8;

//创建用户表
//用户名 密码 昵称 手机 邮箱 性别 生日 真实姓名
CREATE TABLE IF NOT EXISTS user(
username VARCHAR(24) PRIMARY KEY,
password VARCHAR(32) NOT NULL,
nickname VARCHAR(32) UNIQUE KEY NOT NULL,
p_number VARCHAR(11) UNIQUE KEY NOT NUL,
email VARCHAR(64) UNIQUE KEY NOT NULL,
gender_id TINYINT(1),
birthday DATE,
realname VARCHAR(16)
);

//创建性别表
//性别号 性别名
CREATE TABLE IF NOT EXISTS gender(
gender_id TINYINT(1) PRIMARY KET,
gender_name VARCHAR(1) UNIQUE KEY NOT NULL,
);

//创建地址表
//地址号 收货人 地区 详细地址 手机 邮箱 用户名
CREATE TABLE IF NOT EXISTS address(
address_id SMALLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
consignee VARCHAR(16) NOT NULL,
area VARCHAR(64) NOT NULL,
detailed VARCHAR(64) NOT NULL,
postcode VARCHAR(6),
p_number VARCHAR(11) NOT NULL,
username VARCHAR(24) NOT NULL
);

//创建管理员表
//管理员名 密码 手机 邮箱
CREATE TABLE IF NOT EXISTS admin(
adminname VARCHAR(24) PRIMARY KEY,
password VARCHAR(32) NOT NULL,
p_number VARCHAR(11) UNIQUE NOT NULL,
email VARCHAR(64) UNIQUE NOT NULL
);

//创建商品表
//商品号 商品名 分类号 型号 价格 库存量 销售量 上架时间 商品简介
CREATE TABLE IF NOT EXISTS goods(
goods_id SMALLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
goods_name VARCHAR(64) NOT NULL,
classify_id SMALLINT UNSIGNED NOT NULL,
model_id SMALLINT UNSIGNED NOT NULL,
price FLOAT(8,2) UNSIGNED NOT NULL,
store SMALLINT UNSIGNED NOT NULL,
sales SMALLINT UNSIGNED NOT NULL,
shelves_time DATE NOT NULL,
description TEXT NOT NULL
);

//创建商品分类表
//分类号 分类名 子分类号
CREATE TABLE IF NOT EXISTS classify(
classify_id SMALLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
classify_name VARCHAR(64) NOT NULL,
child_classify_id SMALLINT UNSIGNED NOT NULL
);

//创建商品型号表
//型号 分类号
CREATE TABLE IF NOT EXISTS model(
model_id SMALLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
model_name VARCHAR(32) PRIMARY KEY,
classify_id SMALLINT UNSIGNED NOT NULL
);

//创建商品图片表
//图片号 图片地址 商品号
CREATE TABLE IF NOT EXISTS images(
image_id SMALLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
image_url varchar(128) UNIQUE KEY NOL NULL,
goods_id SMALLINT UNSIGNED NOT NOLL
);

//创建购物车表
//用户名 总金额
CREATE TABLE IF NOT EXISTS cart(
username VARCHAR(24) PRIMARY KEY,
sum_price FLOAT(8,2) UNSIGNED NOT NULL
);

//创建购物车子表
//购物车子号 商品号 商品数量 商品总价 用户名
CREATE TABLE IF NOT EXISTS child_cart(
child_cart_id SMALLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
goods_id SMALLINT UNSIGNED NOT NULL,
goods_count SMALLINT UNSIGNED NOT NULL,
title_price FLOAT(8,2) UNSIGNED NOT NULL,
username VARCHAR(24) NOT NULL
);

//创建订单表
//订单号 状态号 地址号 订单金额 配送方式 送达时间
CREATE TABLE IF NOT EXISTS list(
list_id SMALLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
status_id SMALLINT UNSIGNED NOT NULL,
address_id SMALLINT UNSIGNED NOT NULL,
sum_price FLOAT(8,2) UNSIGNED NOT NULL,
delivery VARCHAR(16) NOT NULL,
arrive_time DATE NOT NULL
);

//创建订单子表
//订单子号 商品号 数量 总价 订单号
CREATE TABLE IF NOT EXISTS child_list(
child_list_id SMALLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
goods_id SMALLINT UNSIGNED NOT NULL,
goods_count SMALLINT UNSIGNED NOT NULL,
title_price FLOAT(8,2) UNSIGNED NOT NULL,
list_id SMALLINT UNSIGNED
);

//创建订单状态表
//状态号 状态名 子状态号
CREATE TABLE IF NOT EXISTS status_list(
status_id SMALLINT UNSIGNED PRIMARY KEY AUTO_INCREMENT,
status_name varchar(16) NOT NULL,
child_status_id SMALLINT UNSIGNED NOT NULL
);

//创建评价表
//用户名 商品号 评价信息 评价星级 顶 踩 评价时间
CREATE TABLE IF NOT EXISTS reviews(
username VARCHAR(24) PRIMARY KEY,
goods_id SMALLINT UNSIGNED NOT NULL,
content TEXT NOT NULL,
star_level TINYINT(4) NOT NULL,
up SMALLINT UNSIGNED NOT NULL,
down SMALLINT UNSIGNED NOT NULL,
reviews_time DATE NOT NULL
);
